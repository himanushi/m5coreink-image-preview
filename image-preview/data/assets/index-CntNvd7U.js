(function(){const _=document.createElement("link").relList;if(_&&_.supports&&_.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var I,d,h_,H,__,v_,V,N={},K=[],x_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Q=Array.isArray;function $(e,_){for(var t in _)e[t]=_[t];return e}function m_(e){var _=e.parentNode;_&&_.removeChild(e)}function $_(e,_,t){var o,n,i,u={};for(i in _)i=="key"?o=_[i]:i=="ref"?n=_[i]:u[i]=_[i];if(arguments.length>2&&(u.children=arguments.length>3?I.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)u[i]===void 0&&(u[i]=e.defaultProps[i]);return L(e,u,o,n,null)}function L(e,_,t,o,n){var i={type:e,props:_,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:n??++h_,__i:-1,__u:0};return n==null&&d.vnode!=null&&d.vnode(i),i}function O(e){return e.children}function U(e,_){this.props=e,this.context=_}function P(e,_){if(_==null)return e.__?P(e.__,e.__i+1):null;for(var t;_<e.__k.length;_++)if((t=e.__k[_])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?P(e):null}function H_(e,_,t){var o,n=e.__v,i=n.__e,u=e.__P;if(u)return(o=$({},n)).__v=n.__v+1,d.vnode&&d.vnode(o),X(u,o,n,e.__n,u.ownerSVGElement!==void 0,32&n.__u?[i]:null,_,i??P(n),!!(32&n.__u),t),o.__v=n.__v,o.__.__k[o.__i]=o,o.__d=void 0,o.__e!=i&&y_(o),o}function y_(e){var _,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,_=0;_<e.__k.length;_++)if((t=e.__k[_])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return y_(e)}}function e_(e){(!e.__d&&(e.__d=!0)&&H.push(e)&&!F.__r++||__!==d.debounceRendering)&&((__=d.debounceRendering)||v_)(F)}function F(){var e,_,t,o=[],n=[];for(H.sort(V);e=H.shift();)e.__d&&(t=H.length,_=H_(e,o,n)||_,t===0||H.length>t?(q(o,_,n),n.length=o.length=0,_=void 0,H.sort(V)):_&&d.__c&&d.__c(_,K));_&&q(o,_,n),F.__r=0}function g_(e,_,t,o,n,i,u,l,s,c,a){var r,p,f,v,k,m=o&&o.__k||K,h=_.length;for(t.__d=s,E_(t,_,m),s=t.__d,r=0;r<h;r++)(f=t.__k[r])!=null&&typeof f!="boolean"&&typeof f!="function"&&(p=f.__i===-1?N:m[f.__i]||N,f.__i=r,X(e,f,p,n,i,u,l,s,c,a),v=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Y(p.ref,null,f),a.push(f.ref,f.__c||v,f)),k==null&&v!=null&&(k=v),65536&f.__u||p.__k===f.__k?s=b_(f,s,e):typeof f.type=="function"&&f.__d!==void 0?s=f.__d:v&&(s=v.nextSibling),f.__d=void 0,f.__u&=-196609);t.__d=s,t.__e=k}function E_(e,_,t){var o,n,i,u,l,s=_.length,c=t.length,a=c,r=0;for(e.__k=[],o=0;o<s;o++)u=o+r,(n=e.__k[o]=(n=_[o])==null||typeof n=="boolean"||typeof n=="function"?null:typeof n=="string"||typeof n=="number"||typeof n=="bigint"||n.constructor==String?L(null,n,null,null,null):Q(n)?L(O,{children:n},null,null,null):n.constructor===void 0&&n.__b>0?L(n.type,n.props,n.key,n.ref?n.ref:null,n.__v):n)!=null?(n.__=e,n.__b=e.__b+1,l=P_(n,t,u,a),n.__i=l,i=null,l!==-1&&(a--,(i=t[l])&&(i.__u|=131072)),i==null||i.__v===null?(l==-1&&r--,typeof n.type!="function"&&(n.__u|=65536)):l!==u&&(l===u+1?r++:l>u?a>s-u?r+=l-u:r--:l<u?l==u-1&&(r=l-u):r=0,l!==o+r&&(n.__u|=65536))):(i=t[u])&&i.key==null&&i.__e&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=P(i)),j(i,i,!1),t[u]=null,a--);if(a)for(o=0;o<c;o++)(i=t[o])!=null&&!(131072&i.__u)&&(i.__e==e.__d&&(e.__d=P(i)),j(i,i))}function b_(e,_,t){var o,n;if(typeof e.type=="function"){for(o=e.__k,n=0;o&&n<o.length;n++)o[n]&&(o[n].__=e,_=b_(o[n],_,t));return _}e.__e!=_&&(t.insertBefore(e.__e,_||null),_=e.__e);do _=_&&_.nextSibling;while(_!=null&&_.nodeType===8);return _}function P_(e,_,t,o){var n=e.key,i=e.type,u=t-1,l=t+1,s=_[t];if(s===null||s&&n==s.key&&i===s.type&&!(131072&s.__u))return t;if(o>(s!=null&&!(131072&s.__u)?1:0))for(;u>=0||l<_.length;){if(u>=0){if((s=_[u])&&!(131072&s.__u)&&n==s.key&&i===s.type)return u;u--}if(l<_.length){if((s=_[l])&&!(131072&s.__u)&&n==s.key&&i===s.type)return l;l++}}return-1}function t_(e,_,t){_[0]==="-"?e.setProperty(_,t??""):e[_]=t==null?"":typeof t!="number"||x_.test(_)?t:t+"px"}function A(e,_,t,o,n){var i;_:if(_==="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(_ in o)t&&_ in t||t_(e.style,_,"");if(t)for(_ in t)o&&t[_]===o[_]||t_(e.style,_,t[_])}else if(_[0]==="o"&&_[1]==="n")i=_!==(_=_.replace(/(PointerCapture)$|Capture$/i,"$1")),_=_.toLowerCase()in e?_.toLowerCase().slice(2):_.slice(2),e.l||(e.l={}),e.l[_+i]=t,t?o?t.u=o.u:(t.u=Date.now(),e.addEventListener(_,i?o_:n_,i)):e.removeEventListener(_,i?o_:n_,i);else{if(n)_=_.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(_!=="width"&&_!=="height"&&_!=="href"&&_!=="list"&&_!=="form"&&_!=="tabIndex"&&_!=="download"&&_!=="rowSpan"&&_!=="colSpan"&&_!=="role"&&_ in e)try{e[_]=t??"";break _}catch{}typeof t=="function"||(t==null||t===!1&&_[4]!=="-"?e.removeAttribute(_):e.setAttribute(_,t))}}function n_(e){if(this.l){var _=this.l[e.type+!1];if(e.t){if(e.t<=_.u)return}else e.t=Date.now();return _(d.event?d.event(e):e)}}function o_(e){if(this.l)return this.l[e.type+!0](d.event?d.event(e):e)}function X(e,_,t,o,n,i,u,l,s,c){var a,r,p,f,v,k,m,h,y,w,E,S,Z,D,B,x=_.type;if(_.constructor!==void 0)return null;128&t.__u&&(s=!!(32&t.__u),i=[l=_.__e=t.__e]),(a=d.__b)&&a(_);_:if(typeof x=="function")try{if(h=_.props,y=(a=x.contextType)&&o[a.__c],w=a?y?y.props.value:a.__:o,t.__c?m=(r=_.__c=t.__c).__=r.__E:("prototype"in x&&x.prototype.render?_.__c=r=new x(h,w):(_.__c=r=new U(h,w),r.constructor=x,r.render=C_),y&&y.sub(r),r.props=h,r.state||(r.state={}),r.context=w,r.__n=o,p=r.__d=!0,r.__h=[],r._sb=[]),r.__s==null&&(r.__s=r.state),x.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=$({},r.__s)),$(r.__s,x.getDerivedStateFromProps(h,r.__s))),f=r.props,v=r.state,r.__v=_,p)x.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(x.getDerivedStateFromProps==null&&h!==f&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(h,w),!r.__e&&(r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(h,r.__s,w)===!1||_.__v===t.__v)){for(_.__v!==t.__v&&(r.props=h,r.state=r.__s,r.__d=!1),_.__e=t.__e,_.__k=t.__k,_.__k.forEach(function(T){T&&(T.__=_)}),E=0;E<r._sb.length;E++)r.__h.push(r._sb[E]);r._sb=[],r.__h.length&&u.push(r);break _}r.componentWillUpdate!=null&&r.componentWillUpdate(h,r.__s,w),r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(f,v,k)})}if(r.context=w,r.props=h,r.__P=e,r.__e=!1,S=d.__r,Z=0,"prototype"in x&&x.prototype.render){for(r.state=r.__s,r.__d=!1,S&&S(_),a=r.render(r.props,r.state,r.context),D=0;D<r._sb.length;D++)r.__h.push(r._sb[D]);r._sb=[]}else do r.__d=!1,S&&S(_),a=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++Z<25);r.state=r.__s,r.getChildContext!=null&&(o=$($({},o),r.getChildContext())),p||r.getSnapshotBeforeUpdate==null||(k=r.getSnapshotBeforeUpdate(f,v)),g_(e,Q(B=a!=null&&a.type===O&&a.key==null?a.props.children:a)?B:[B],_,t,o,n,i,u,l,s,c),r.base=_.__e,_.__u&=-161,r.__h.length&&u.push(r),m&&(r.__E=r.__=null)}catch(T){_.__v=null,s||i!=null?(_.__e=l,_.__u|=s?160:32,i[i.indexOf(l)]=null):(_.__e=t.__e,_.__k=t.__k),d.__e(T,_,t)}else i==null&&_.__v===t.__v?(_.__k=t.__k,_.__e=t.__e):_.__e=S_(t.__e,_,t,o,n,i,u,s,c);(a=d.diffed)&&a(_)}function q(e,_,t){for(var o=0;o<t.length;o++)Y(t[o],t[++o],t[++o]);d.__c&&d.__c(_,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(i){i.call(n)})}catch(i){d.__e(i,n.__v)}})}function S_(e,_,t,o,n,i,u,l,s){var c,a,r,p,f,v,k,m=t.props,h=_.props,y=_.type;if(y==="svg"&&(n=!0),i!=null){for(c=0;c<i.length;c++)if((f=i[c])&&"setAttribute"in f==!!y&&(y?f.localName===y:f.nodeType===3)){e=f,i[c]=null;break}}if(e==null){if(y===null)return document.createTextNode(h);e=n?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,h.is&&h),i=null,l=!1}if(y===null)m===h||l&&e.data===h||(e.data=h);else{if(i=i&&I.call(e.childNodes),m=t.props||N,!l&&i!=null)for(m={},c=0;c<e.attributes.length;c++)m[(f=e.attributes[c]).name]=f.value;for(c in m)f=m[c],c=="children"||(c=="dangerouslySetInnerHTML"?r=f:c==="key"||c in h||A(e,c,null,f,n));for(c in h)f=h[c],c=="children"?p=f:c=="dangerouslySetInnerHTML"?a=f:c=="value"?v=f:c=="checked"?k=f:c==="key"||l&&typeof f!="function"||m[c]===f||A(e,c,f,m[c],n);if(a)l||r&&(a.__html===r.__html||a.__html===e.innerHTML)||(e.innerHTML=a.__html),_.__k=[];else if(r&&(e.innerHTML=""),g_(e,Q(p)?p:[p],_,t,o,n&&y!=="foreignObject",i,u,i?i[0]:t.__k&&P(t,0),l,s),i!=null)for(c=i.length;c--;)i[c]!=null&&m_(i[c]);l||(c="value",v!==void 0&&(v!==e[c]||y==="progress"&&!v||y==="option"&&v!==m[c])&&A(e,c,v,m[c],!1),c="checked",k!==void 0&&k!==e[c]&&A(e,c,k,m[c],!1))}return e}function Y(e,_,t){try{typeof e=="function"?e(_):e.current=_}catch(o){d.__e(o,t)}}function j(e,_,t){var o,n;if(d.unmount&&d.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||Y(o,null,_)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){d.__e(i,_)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(n=0;n<o.length;n++)o[n]&&j(o[n],_,t||typeof e.type!="function");t||e.__e==null||m_(e.__e),e.__=e.__e=e.__d=void 0}function C_(e,_,t){return this.constructor(e,t)}function N_(e,_,t){var o,n,i,u;d.__&&d.__(e,_),n=(o=typeof t=="function")?null:t&&t.__k||_.__k,i=[],u=[],X(_,e=(!o&&t||_).__k=$_(O,null,[e]),n||N,N,_.ownerSVGElement!==void 0,!o&&t?[t]:n?null:_.firstChild?I.call(_.childNodes):null,i,!o&&t?t:n?n.__e:_.firstChild,o,u),e.__d=void 0,q(i,e,u)}I=K.slice,d={__e:function(e,_,t,o){for(var n,i,u;_=_.__;)if((n=_.__c)&&!n.__)try{if((i=n.constructor)&&i.getDerivedStateFromError!=null&&(n.setState(i.getDerivedStateFromError(e)),u=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(e,o||{}),u=n.__d),u)return n.__E=n}catch(l){e=l}throw e}},h_=0,U.prototype.setState=function(e,_){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=$({},this.state),typeof e=="function"&&(e=e($({},t),this.props)),e&&$(t,e),e!=null&&this.__v&&(_&&this._sb.push(_),e_(this))},U.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),e_(this))},U.prototype.render=O,H=[],v_=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,V=function(e,_){return e.__v.__b-_.__v.__b},F.__r=0;var z,g,R,r_,G=0,k_=[],W=[],b=d,i_=b.__b,l_=b.__r,c_=b.diffed,u_=b.__c,s_=b.unmount,f_=b.__;function D_(e,_){b.__h&&b.__h(g,e,G||_),G=0;var t=g.__H||(g.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({__V:W}),t.__[e]}function a_(e){return G=1,T_(w_,e)}function T_(e,_,t){var o=D_(z++,2);if(o.t=e,!o.__c&&(o.__=[t?t(_):w_(void 0,_),function(l){var s=o.__N?o.__N[0]:o.__[0],c=o.t(s,l);s!==c&&(o.__N=[c,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var n=function(l,s,c){if(!o.__c.__H)return!0;var a=o.__c.__H.__.filter(function(p){return!!p.__c});if(a.every(function(p){return!p.__N}))return!i||i.call(this,l,s,c);var r=!1;return a.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(r=!0)}}),!(!r&&o.__c.props===l)&&(!i||i.call(this,l,s,c))};g.u=!0;var i=g.shouldComponentUpdate,u=g.componentWillUpdate;g.componentWillUpdate=function(l,s,c){if(this.__e){var a=i;i=void 0,n(l,s,c),i=a}u&&u.call(this,l,s,c)},g.shouldComponentUpdate=n}return o.__N||o.__}function A_(){for(var e;e=k_.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(M),e.__H.__h.forEach(J),e.__H.__h=[]}catch(_){e.__H.__h=[],b.__e(_,e.__v)}}b.__b=function(e){g=null,i_&&i_(e)},b.__=function(e,_){e&&_.__k&&_.__k.__m&&(e.__m=_.__k.__m),f_&&f_(e,_)},b.__r=function(e){l_&&l_(e),z=0;var _=(g=e.__c).__H;_&&(R===g?(_.__h=[],g.__h=[],_.__.forEach(function(t){t.__N&&(t.__=t.__N),t.__V=W,t.__N=t.i=void 0})):(_.__h.forEach(M),_.__h.forEach(J),_.__h=[],z=0)),R=g},b.diffed=function(e){c_&&c_(e);var _=e.__c;_&&_.__H&&(_.__H.__h.length&&(k_.push(_)!==1&&r_===b.requestAnimationFrame||((r_=b.requestAnimationFrame)||L_)(A_)),_.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.__V!==W&&(t.__=t.__V),t.i=void 0,t.__V=W})),R=g=null},b.__c=function(e,_){_.some(function(t){try{t.__h.forEach(M),t.__h=t.__h.filter(function(o){return!o.__||J(o)})}catch(o){_.some(function(n){n.__h&&(n.__h=[])}),_=[],b.__e(o,t.__v)}}),u_&&u_(e,_)},b.unmount=function(e){s_&&s_(e);var _,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(o){try{M(o)}catch(n){_=n}}),t.__H=void 0,_&&b.__e(_,t.__v))};var p_=typeof requestAnimationFrame=="function";function L_(e){var _,t=function(){clearTimeout(o),p_&&cancelAnimationFrame(_),setTimeout(e)},o=setTimeout(t,100);p_&&(_=requestAnimationFrame(t))}function M(e){var _=g,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),g=_}function J(e){var _=g;e.__c=e.__(),g=_}function w_(e,_){return typeof _=="function"?_(e):_}var U_=0;function C(e,_,t,o,n,i){var u,l,s={};for(l in _)l=="ref"?u=_[l]:s[l]=_[l];var c={type:e,props:s,key:t,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--U_,__i:-1,__u:0,__source:n,__self:i};if(typeof e=="function"&&(u=e.defaultProps))for(l in u)s[l]===void 0&&(s[l]=u[l]);return d.vnode&&d.vnode(c),c}function W_(){const[e,_]=a_(null),[t,o]=a_([]),n=l=>{const s=l.target.files[0];if(s){const c=new FileReader;c.onload=a=>{u(a.target.result,r=>{o(r),_(a.target.result)})},c.readAsDataURL(s)}},i=()=>{if(t.length===0){alert("画像が選択されていません。");return}fetch("/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t})}).then(l=>{if(l.ok)alert("画像が正常にアップロードされました。");else throw new Error("サーバーからエラーが返されました。")}).catch(l=>{console.error("アップロード中にエラーが発生しました:",l),alert("画像のアップロードに失敗しました。")})};function u(l,s){const r=new Image;r.onload=()=>{const p=document.createElement("canvas"),f=p.getContext("2d");if(p.width=200,p.height=200,!f)throw new Error("2Dコンテキストが取得できませんでした。");f.drawImage(r,0,0,200,200);const v=f.getImageData(0,0,p.width,p.height),k=[];for(let m=0;m<200;m++){let h="";for(let y=0;y<200;y++){const w=(m*200+y)*4,E=.34*v.data[w]+.5*v.data[w+1]+.16*v.data[w+2];h+=E>128?"1":"0"}k.push(h)}s(k)},r.src=l}return C("div",{children:[C("input",{type:"file",onChange:n,accept:"image/*"}),e&&C("img",{src:e,alt:"Preview",style:{maxWidth:"100%",maxHeight:"200px"}}),C("button",{type:"submit",onClick:i,children:"画像をアップロード"})]})}const d_=document.getElementById("app");d_&&N_(C(W_,{}),d_);
